# 功能需求12的开发说明

## 进度说明

1. 6月7日进度：完成了“学生更新核酸疫苗功能”部分的功能开发与代码实现

## 需求功能说明

本功能为学生更新核酸疫苗功能，更新个人疫苗接种情况以及每日核酸统计信息.

## 页面说明

在学生更新核酸疫苗功能的表单中含有疫苗接种选项、核酸检测时间选择输入框、核酸检测地点选择输入框，用户需要选择相应内容并提交


## 开发过程中的功能迭代与调整

在本系统中，学生更新核酸疫苗功能页面经过了几次与组长的讨论与磋商：

1. 结合日常系统使用体验与用户习惯，本页面的表单应该简洁美观；

2. 在开发过程中，我们在user_info表中新增加了一个字段last，表示最近一次核酸检测时间，以简化从数据库hesuan表中查找最近一次记录的操作；

3. 在后续开发的过程中，我们发现了一些输入值问题：

   - 问题一：用户输入的核酸检测日期可能是在补充过去没有记录的核酸检测日期，并不是已录入核酸检测日期中离当前最近的日期；
   
   - 修改方案一：我们检测每次用户输入的核酸检测日期，并与当前user_info表中的last字段相比较，使用if语句选择最近的日期更新last字段。

   - 问题二：用户在更新疫苗状态的时候有可能选择比现在的已接种剂量少的选项；

   - 解决方案二：不能更新比现在的已接种剂量少，增加if-elseif-else语句，限制对已接种剂量的更新，比如数据库里是两针，他更新一针，这时候提示他“您已接种两针，无法更新为一针，若数据错误请联系管理员修改”，如果数据库里是两针，他更新两针，这时候提示他“您当前已接种两针，无需更新”。



## 代码说明

在 updatehesuan.php 中我们进行了如下功能的代码设计与实现：

1. 用户更新个人疫苗接种情况
2. 用户新增核酸检测日期信息
3. 用户新增核酸检测地点信息

## 前端页面截图

1. 用户更新疫苗接种情况

![输入图片说明](Screenshot%201.jpg)

![输入图片说明](Screenshot%202.jpg)

2. 用户新增核酸检测信息

![输入图片说明](Screenshot%203.jpg)

![输入图片说明](Screenshot%204.jpg)

![输入图片说明](Screenshot%205.jpg)

3. 用户新增的核酸检测日期早于最近日期，最近日期不更新

![输入图片说明](Screenshot%206.jpg)

4. 用户新增的核酸检测日期晚于最近日期，最近日期更新

![输入图片说明](Screenshot%207.jpg)

![输入图片说明](Screenshot%208.jpg)

5. 用户新增的疫苗接种剂量小于已记录的接种剂量

![输入图片说明](Screenshot%209.jpg)

6. 用户新增的疫苗接种剂量等于已记录的接种剂量

![输入图片说明](Screenshot%2010.jpg)

## 后续改进

1. 系统应该验证用户提交的核酸检测信息是否完整
   - 不允许提交只有日期或只有地点的信息
2. 系统应该验证用户提交的核酸检测日期信息是否合法
   - 不允许提交大于当前的日期